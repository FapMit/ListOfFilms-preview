for(var e,t={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},i=new Uint8Array(16),o=[],s=0;s<256;++s)o.push((s+256).toString(16).slice(1));var n=function(s,n,d){if(t.randomUUID&&!n&&!s)return t.randomUUID();var r=(s=s||{}).random||(s.rng||function(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(i)})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){d=d||0;for(var l=0;l<16;++l)n[d+l]=r[l];return n}return function(e,t=0){return(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase()}(r)};const d=`
  <svg width="35" height="35" viewBox="0 0 485.219 485.22">
    <g>
      <path d="M467.476,146.438l-21.445,21.455L317.35,39.23l21.445-21.457c23.689-23.692,62.104-23.692,85.795,0l42.886,42.897
        C491.133,84.349,491.133,122.748,467.476,146.438z M167.233,403.748c-5.922,5.922-5.922,15.513,0,21.436
        c5.925,5.955,15.521,5.955,21.443,0L424.59,189.335l-21.469-21.457L167.233,403.748z M60,296.54c-5.925,5.927-5.925,15.514,0,21.44
        c5.922,5.923,15.518,5.923,21.443,0L317.35,82.113L295.914,60.67L60,296.54z M338.767,103.54L102.881,339.421
        c-11.845,11.822-11.815,31.041,0,42.886c11.85,11.846,31.038,11.901,42.914-0.032l235.886-235.837L338.767,103.54z
        M145.734,446.572c-7.253-7.262-10.749-16.465-12.05-25.948c-3.083,0.476-6.188,0.919-9.36,0.919
        c-16.202,0-31.419-6.333-42.881-17.795c-11.462-11.491-17.77-26.687-17.77-42.887c0-2.954,0.443-5.833,0.859-8.703
        c-9.803-1.335-18.864-5.629-25.972-12.737c-0.682-0.677-0.917-1.596-1.538-2.338L0,485.216l147.748-36.986
        C147.097,447.637,146.36,447.193,145.734,446.572z"/>
    </g>
  </svg>
`,r=`
  <svg viewBox="0 0 24 24" width="48">
    <g id="icon">
      <path d="M21.577,3.381c-0.438-0.439-1.152-0.439-1.591,0L8.614,14.754l-4.6-4.6c-0.438-0.439-1.152-0.439-1.591,0L0.33,12.248   c-0.438,0.438-0.438,1.152,0,1.591l7.364,7.364c0.246,0.246,0.573,0.382,0.92,0.382s0.674-0.136,0.92-0.382L23.67,7.065   c0.438-0.438,0.438-1.152,0-1.591L21.577,3.381z M22.963,6.358L8.827,20.496c-0.113,0.115-0.311,0.115-0.425,0l-7.365-7.364   c-0.049-0.049-0.049-0.128,0-0.177l2.094-2.094c0.021-0.021,0.055-0.031,0.088-0.031s0.067,0.011,0.088,0.031l4.954,4.953   c0.188,0.188,0.52,0.188,0.707,0L20.693,4.088c0.049-0.049,0.128-0.049,0.177,0l2.094,2.094C23.012,6.23,23.012,6.31,22.963,6.358z" />
    </g>
  </svg>
`,l=`
  <svg enable-background="new 0 0 80 80" viewBox="-20 -20 80 80">
    <g>
      <path d="M28,40H11.8c-3.3,0-5.9-2.7-5.9-5.9V16c0-0.6,0.4-1,1-1s1,0.4,1,1v18.1c0,2.2,1.8,3.9,3.9,3.9H28c2.2,0,3.9-1.8,3.9-3.9V16   c0-0.6,0.4-1,1-1s1,0.4,1,1v18.1C33.9,37.3,31.2,40,28,40z"/> 
    </g>
    <g>
      <path d="M33.3,4.9h-7.6C25.2,2.1,22.8,0,19.9,0s-5.3,2.1-5.8,4.9H6.5c-2.3,0-4.1,1.8-4.1,4.1S4.2,13,6.5,13h26.9   c2.3,0,4.1-1.8,4.1-4.1S35.6,4.9,33.3,4.9z M19.9,2c1.8,0,3.3,1.2,3.7,2.9h-7.5C16.6,3.2,18.1,2,19.9,2z M33.3,11H6.5   c-1.1,0-2.1-0.9-2.1-2.1c0-1.1,0.9-2.1,2.1-2.1h26.9c1.1,0,2.1,0.9,2.1,2.1C35.4,10.1,34.5,11,33.3,11z"/>
    </g>
    <g>
      <path d="M12.9,35.1c-0.6,0-1-0.4-1-1V17.4c0-0.6,0.4-1,1-1s1,0.4,1,1v16.7C13.9,34.6,13.4,35.1,12.9,35.1z"/>
    </g>
    <g>
      <path d="M26.9,35.1c-0.6,0-1-0.4-1-1V17.4c0-0.6,0.4-1,1-1s1,0.4,1,1v16.7C27.9,34.6,27.4,35.1,26.9,35.1z"/>
    </g>
    <g>
      <path d="M19.9,35.1c-0.6,0-1-0.4-1-1V17.4c0-0.6,0.4-1,1-1s1,0.4,1,1v16.7C20.9,34.6,20.4,35.1,19.9,35.1z"/>
    </g>
  </svg>
`,c=["З","а","г","р","у","з","к","а",".",".","."],a={moviesIds:[],moviesById:{},addMovie:function({title:e}){let t={id:n(),title:e,done:!1};return this.moviesIds.push(t.id),this.moviesById[t.id]=t,t},setMovies:function(e){this.moviesIds=[],this.moviesById={},e.forEach(e=>{this.moviesIds.push(e.id),this.moviesById[e.id]=e})},getMovies:function(){return{moviesById:this.moviesById,moviesIds:this.moviesIds}},toggleMovie:function(e){this.moviesById[e].done=!this.moviesById[e].done},updateTitleMovie:function(e,t){this.moviesById[e].title=t},getMovie:function(e){return this.moviesById[e]},deleteMovie:function(e){delete this.moviesById[e];let t=this.moviesIds.indexOf(e);-1!==t&&this.moviesIds.splice(t,1)}},m=function(e,t,i,o){let s=document.querySelector(e),n=document.querySelector(".movies__settings-counter"),a=document.querySelector("body");return{outputNode:s,renderMovies:function({moviesIds:e,moviesById:t}){e.forEach(e=>{this.addMovie(t[e])})},renderMessage:function(){let e=document.createElement("li");e.className="movies__list-item movies__list-item--message";let t=document.createElement("p");t.className="movies__item-text",t.textContent="Список фильмов пуст...",e.append(t),this.outputNode.append(e)},renderCounter:function(e){let t=document.createElement("span"),i=0,o=e.moviesById;for(let e in o)o[e].done&&i++;t.textContent=i;let s=document.createElement("span");s.textContent=e.moviesIds.length,n.append("Просмотрено: ",t," / ",s)},renderPreloader:function(){let e=document.createElement("div");e.classList.add("preloader");let t=document.createElement("div");t.classList.add("preloader__inner"),c.forEach((e,i)=>{let o=document.createElement("span");o.textContent=e,o.style=`--i: ${i+1}`,t.append(o)}),e.append(t),a.append(e)},deletePreloader:function(){let e=document.querySelector(".preloader");setTimeout(()=>{e.classList.add("preloader--hidden")},3e3),setTimeout(()=>{e.remove()},5e3)},clearCounter:function(){n.innerHTML=""},clearMoviesList:function(){this.outputNode.innerHTML=""},addMovie:function(e){let s=document.createElement("li");s.className="movies__list-item";let n=document.createElement("label");n.className="checkbox";let c=document.createElement("input");c.setAttribute("type","checkbox"),c.setAttribute("name",e.title),c.setAttribute("id",e.id);let a=document.createElement("span");a.className="checkmark",n.appendChild(c),n.appendChild(a),c.onclick=()=>{t(e.id)};let m=document.createElement("input");m.setAttribute("type","text"),m.className="movies__item-text",m.value=e.title,m.disabled=!0;let u=document.createElement("button");u.innerHTML=d,u.setAttribute("type","button"),u.classList="movie__item-btn movie__item-btn--redact",u.onclick=()=>{m.disabled?(document.querySelectorAll(".movies__list-item").forEach(e=>{let t=e.childNodes[1],i=e.childNodes[2];t.disabled=!0,t.classList.remove("movies__item-text--redacted"),i.innerHTML=d}),u.innerHTML=r,m.disabled=!1,m.focus(),m.classList.add("movies__item-text--redacted")):(i(e.id,m.value),u.innerHTML=d,m.disabled=!0,m.classList.remove("movies__item-text--redacted"))};let v=document.createElement("button");v.innerHTML=l,v.setAttribute("type","button"),v.classList="movie__item-btn movie__item-btn--delete",v.onclick=()=>{v.classList.add("movie__item-btn--delete-animate"),setTimeout(()=>{o(e.id)},1e3)},e.done&&(c.setAttribute("checked",""),u.setAttribute("disabled",""),v.setAttribute("disabled","")),s.append(n,m,u,v),this.outputNode.append(s)}}}(".js-movies-output",function(e){a.toggleMovie(e),u.updateMovie(a.getMovie(e)),m.clearCounter(),m.renderCounter(a.getMovies()),m.clearMoviesList(),m.renderMovies(a.getMovies())},function(e,t){a.updateTitleMovie(e,t),u.updateMovie(a.getMovie(e))},function(e){u.deleteMovie(e),a.deleteMovie(e),0!=a.getMovies().moviesIds.length?(m.clearMoviesList(),m.renderMovies(a.getMovies()),m.clearCounter(),m.renderCounter(a.getMovies())):(m.clearMoviesList(),m.clearCounter(),m.renderMessage())}),u={localMovies:localStorage.getItem("movies")?JSON.parse(localStorage.getItem("movies")):[],getMovies:function(){return JSON.parse(localStorage.getItem("movies"))},clearLocalMovies:function(){this.localMovies=[],localStorage.setItem("movies",JSON.stringify(this.localMovies))},addMovie:function(e){this.localMovies.push(e),localStorage.setItem("movies",JSON.stringify(this.localMovies))},deleteMovie:function(e){let t=this.localMovies;for(key in t)if(t[key].id===e){t.splice(key,1),localStorage.setItem("movies",JSON.stringify(t));break}},updateMovie:function(e){let t=this.localMovies;for(key in t)if(t[key].id===e.id){t[key].title=e.title,t[key].done=e.done,localStorage.setItem("movies",JSON.stringify(t));break}}},v=document.querySelector(".js-movies-input"),p=document.querySelector(".js-movies-btn");if(m.renderPreloader(),u.getMovies()&&0!==u.getMovies().length){let e=u.getMovies();a.setMovies(e),m.renderMovies(a.getMovies()),m.renderCounter(a.getMovies()),m.deletePreloader()}else m.renderMessage(),m.deletePreloader();p.addEventListener("click",e=>{if(!v.value)return;0==a.getMovies().moviesIds.length&&m.clearMoviesList();let t=v.value,i=a.addMovie({title:t});m.addMovie(i),u.addMovie(i),m.clearCounter(),m.renderCounter(a.getMovies()),function(e){for(let t=0;t<100;t++){let t=document.createElement("i");t.classList.add("spark"),0===e.clientX&&0===e.clientY?(t.style.left=e.pageX+"px",t.style.top=e.pageY+"px"):(t.style.left=e.clientX+"px",t.style.top=e.clientY+"px");let i=(Math.random()-.5)*window.innerWidth,o=(Math.random()-.5)*window.innerHeight;t.style.setProperty("--x",i+"px"),t.style.setProperty("--y",o+"px");let s=8*Math.random()+2;t.style.width=s+"px",t.style.height=s+"px";let n=2*Math.random()+.5;t.style.animation=`animate ${n}s ease-out forwards`,document.body.appendChild(t),setTimeout(function(){t.remove()},2e3)}}(e),v.value=""}),document.addEventListener("keydown",e=>{13===e.keyCode&&e.target.classList.contains("js-movies-input")&&p.click(),13===e.keyCode&&e.target.classList.contains("movies__item-text--redacted")&&e.target.nextElementSibling.click()});